# 리뷰 관점 가이드 & 출력 포맷

## 리뷰 관점 (8개)

각 관점에서 diff를 분석하고, 발견 사항을 아래 태그로 분류합니다.

### 1. Bug `[Bug]`
- 로직 오류, off-by-one 에러
- null/undefined 참조 가능성
- 타입 불일치, 잘못된 변수 사용
- 리소스 누수 (미닫힘 파일, 커넥션 등)
- 예외 처리 누락 또는 잘못된 예외 처리

### 2. Breaking Change `[Breaking]`
- API 응답 스키마 변경 (필드 추가/삭제/타입 변경)
- 함수 시그니처 변경 (파라미터 추가/삭제/순서 변경)
- 하위 호환성을 깨는 변경
- DB 스키마 마이그레이션 필요 여부
- 설정/환경변수 변경

### 3. Performance `[Perf]`
- O(n^2) 이상의 알고리즘 복잡도
- 불필요한 반복, 중복 연산
- N+1 쿼리 문제
- 대용량 데이터 메모리 로딩
- 캐싱 기회 누락

### 4. Security `[Security]`
- SQL/NoSQL 인젝션
- XSS, CSRF 취약점
- 인증/인가 우회 가능성
- 민감 정보 노출 (API 키, 비밀번호 로깅)
- 안전하지 않은 직렬화/역직렬화

### 5. Logic `[Logic]`
- 비즈니스 로직 오류
- Edge case 미처리 (빈 배열, 0, 음수, 경계값)
- 조건문 논리 오류 (AND/OR 혼동, 부정 조건)
- 상태 전이 오류
- 경쟁 조건 (race condition)

### 6. Redundancy `[Redundancy]`
- 중복 코드 (DRY 위반)
- 불필요한 API 호출 또는 DB 쿼리
- 사용되지 않는 변수, import, 함수
- 과도한 추상화 또는 불필요한 래퍼
- dead code

### 7. Testing `[Testing]`
- 테스트 커버리지 부족
- 누락된 테스트 케이스 (경계값, 에러 케이스)
- 테스트 품질 (모킹 과다, 구현 의존적 테스트)
- 테스트와 구현 불일치

### 8. Design `[Design]`
- 관심사 분리 (SRP 위반)
- 의존성 방향 (상위 모듈이 하위 모듈에 의존)
- 네이밍 일관성
- 에러 처리 전략 일관성
- 코드 가독성

## 분류 기준

### "머지 전 확인 필요" (Must-fix)
다음 중 하나에 해당:
- 프로덕션 버그를 유발할 가능성이 높은 문제
- 보안 취약점
- Breaking change 중 하위 호환성 미고려
- 데이터 손실 가능성

### "개선 권장" (Nice-to-have)
다음 중 하나에 해당:
- 성능 개선 기회
- 코드 품질/가독성 개선
- 테스트 보강 필요
- 리팩토링 제안
- 잠재적 문제 (현재는 영향 없지만 향후 문제 가능)

## 최종 판정 기준

| 판정 | 조건 |
|------|------|
| **APPROVED** | "머지 전 확인 필요" 항목 없음 |
| **APPROVED with suggestions** | "머지 전 확인 필요" 항목 없고, "개선 권장" 항목 있음 |
| **CHANGES REQUESTED** | "머지 전 확인 필요" 항목 1개 이상 |

## 출력 포맷

```markdown
## PR #{id} Code Review: {title}

**Repo**: {workspace}/{repo}
**Branch**: {source} → {target}
**Author**: {author}
**Date**: {date}

---

### 변경 요약

{이 PR이 무엇을 하는지 2-3문장으로 요약}

---

### 머지 전 확인 필요

| # | 유형 | 파일 | 내용 |
|---|------|------|------|
| 1 | [Bug] | `path/to/file.py:42` | 설명 |
| 2 | [Security] | `path/to/file.js:15` | 설명 |

{각 항목에 대한 상세 설명과 수정 제안}

---

### 개선 권장

| # | 유형 | 파일 | 내용 |
|---|------|------|------|
| 1 | [Perf] | `path/to/file.py:88` | 설명 |
| 2 | [Design] | `path/to/module/` | 설명 |

{각 항목에 대한 상세 설명과 수정 제안}

---

### 잘 된 부분

- {칭찬할 만한 구현 결정이나 코드 품질}
- {좋은 테스트 커버리지나 에러 처리}

---

### 최종 판정

**APPROVED / APPROVED with suggestions / CHANGES REQUESTED**

{판정 이유 1-2문장}
```

## 리뷰 작성 원칙

1. **구체적으로**: 파일명과 라인 번호를 명시합니다.
2. **근거 제시**: 왜 문제인지, 어떤 상황에서 문제가 발생하는지 설명합니다.
3. **대안 제시**: 문제만 지적하지 말고, 어떻게 수정하면 좋을지 제안합니다.
4. **균형 유지**: 문제점뿐 아니라 잘 된 부분도 언급합니다.
5. **실용적으로**: 사소한 스타일 이슈보다 실질적인 문제에 집중합니다.
